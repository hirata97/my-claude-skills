---
name: create-issue
description: Issue品質チェック・作成ワークフロー（標準準拠）
enabled: true
---

# Create Issue Skill - Issue品質保証エージェント

このスキルは**Issue作成時の品質を保証**し、プロジェクトのIssue管理標準に準拠したIssueを作成します。

## 基本方針

- **品質第一**: 作成前に必ず品質チェックを実行
- **標準準拠**: ラベル体系・命名規則・テンプレートを遵守
- **対話ベース**: ユーザーと議論しながら最適なIssue構造を決定
- **自動バリデーション**: 作成前に全項目を検証

## Issue作成の必須要件

### 1. タイトル規則

#### 通常のチケット

```
簡潔で具体的な説明（何が課題か一目でわかる）

✅ 良い例:
- ユーザー登録時のメール認証機能追加
- ログイン画面でパスワード保存が機能しない
- ダッシュボードページの読み込み速度改善

❌ 悪い例:
- バグあり
- 修正
- 改善案
```

#### 親チケット

```
[親チケット] 簡潔で具体的な説明

✅ 良い例:
- [親チケット] READMEドキュメント整備・拡充
- [親チケット] ユーザー認証システム刷新
- [親チケット] パフォーマンス最適化プロジェクト

❌ 悪い例:
- [親チケット] いろいろ改善
- 親チケット: 機能追加（フォーマット違反）
```

### 2. 推奨ラベル体系

プロジェクトで以下のラベルを使用している場合、適切に設定：

#### A. 優先度ラベル（priority:）

| ラベル | 説明 | 使用例 |
|--------|------|--------|
| `priority:P0` | 最高優先度（緊急・重要）| 本番障害、セキュリティ脆弱性、リリースブロッカー |
| `priority:P1` | 高優先度（重要）| 主要機能追加、パフォーマンス改善 |
| `priority:P2` | 中優先度（通常）| 機能改善、リファクタリング、ドキュメント |

**優先度の決定基準:**

- **P0**: 本番環境に影響するバグ、セキュリティ脆弱性
- **P1**: 新機能開発のメイン機能、重要なリファクタリング
- **P2**: UI/UX改善、小規模な機能追加、ドキュメント整備

#### B. サイズラベル（size:）

| ラベル | 目安時間 | 説明 |
|--------|----------|------|
| `size:S` | 1-2日 | 単一ファイル修正、設定変更、簡単なバグ修正 |
| `size:M` | 3-5日 | 複数ファイル変更、新規コンポーネント作成、テスト追加 |
| `size:L` | 1週間以上 | 新しい主要機能開発、アーキテクチャ変更 |

#### C. 実装内容ラベル（type）

**基本的な作業:**
- `type:bugfix` / `bug` - バグ修正
- `type:enhancement` / `enhancement` - 既存機能改善
- `type:feature` / `feature` - 新機能追加
- `type:refactor` / `refactoring` - リファクタリング

**インフラ・技術:**
- `type:automation` - 自動化・スクリプト
- `type:ci-cd` - CI/CD・パイプライン
- `type:performance` - パフォーマンス改善
- `type:security` - セキュリティ

**品質・ドキュメント:**
- `type:docs` / `documentation` - ドキュメント
- `type:test` / `testing` - テスト関連

### 3. 親チケット・子チケット管理

#### 親チケットの作成方針

- **大きな機能・改善の全体管理**: 複数の作業に分割される場合
- **子チケット統合・調整**: 各子チケットの進捗を統合
- **タイトル形式**: 必ず `[親チケット]` で開始
- **サイズ**: 通常 `size:L` または `size:M`

#### 子チケットの作成方針

- **具体的な実装タスク**: 1-2日で完了可能な作業単位
- **親チケット関連付け**: 本文に `親チケット: #XXX` を記載
- **独立した価値提供**: 単体で意味のある成果物を作成
- **サイズ**: 通常 `size:S` または `size:M`

#### 命名規則例

```
親チケット: [親チケット] READMEドキュメント整備・拡充
  子チケット: src/ディレクトリREADME.md作成
  子チケット: tests/ディレクトリREADME.md作成
  子チケット: docs/ディレクトリREADME.md作成

親チケット: [親チケット] ユーザー認証システム強化
  子チケット: パスワード強度チェック機能追加
  子チケット: 二段階認証システム実装
  子チケット: セッション管理機能改善
```

## Issue作成前の品質チェック項目

### 必須項目チェック

- [ ] タイトルが具体的で明確か
- [ ] 親チケットの場合、`[親チケット]` で開始しているか
- [ ] 適切なラベルが設定されているか
- [ ] 子チケットの場合、親チケット番号（#XXX）が記載されているか

### 推奨項目チェック

- [ ] 受け入れ条件が明確に記載されているか
- [ ] 技術的要件が記載されているか
- [ ] テスト要件が記載されているか

### 整合性チェック

- [ ] タイトルと説明文の内容が一致しているか
- [ ] ラベルの組み合わせが適切か
- [ ] 優先度とサイズが矛盾していないか

## Issueテンプレート

### 機能要求（Feature Request）

```markdown
## 機能概要

[簡潔に機能の概要を説明]

## 目的・背景

[なぜこの機能が必要なのか]

## 受け入れ条件

- [ ] 条件1
- [ ] 条件2
- [ ] 条件3

## UI/UX要件（該当時）

- デザインモックアップ
- ユーザビリティ要件

## 技術的要件

- 使用技術・ライブラリ
- パフォーマンス要件
- セキュリティ考慮事項

## テスト要件

- [ ] ユニットテスト
- [ ] E2Eテスト
- [ ] セキュリティテスト

## 参考資料

- 関連Issue
- 外部ドキュメント
- 技術記事等
```

### バグ報告（Bug Report）

```markdown
## バグ概要

[バグの内容を簡潔に説明]

## 再現手順

1.
2.
3.

## 期待される動作

[正常に動作した場合の挙動]

## 実際の動作

[実際に発生している問題]

## 環境情報

- ブラウザ: Chrome 120.0
- OS: Windows 11
- Node.js: v18.17.0
- npm: v9.8.1

## スクリーンショット・ログ

(エラースクリーンショット、コンソールログ等)

## 調査情報

- エラーメッセージ
- スタックトレース
- 関連するコード箇所

## 影響度

- [ ] 機能停止
- [ ] パフォーマンス低下
- [ ] UI表示問題
- [ ] データ不整合
```

### 親チケットテンプレート

```markdown
## プロジェクト概要

[大規模機能・改善の全体像を説明]

## 目的

[なぜこのプロジェクトが必要なのか]

## 子チケット一覧

- [ ] #XXX - [子チケット名1]
- [ ] #XXX - [子チケット名2]
- [ ] #XXX - [子チケット名3]

## 実装順序・依存関係

1. 最初に #XXX を実装（基盤）
2. 次に #XXX と #XXX を並行実装
3. 最後に #XXX で統合

## 全体の受け入れ条件

- [ ] すべての子チケットが完了
- [ ] 統合テストが通過
- [ ] ドキュメントが更新済み

## 関連資料

- 設計ドキュメント
- 技術仕様書
```

## 実行フロー

### 1. 要件ヒアリング
- 何を実現したいかの議論
- 背景・目的の整理
- 技術的制約・要件の確認

### 2. Issue構造の提案
- 単一Issue vs 親子チケット構造の判定
- 適切な作業分割の提案
- 優先度・作業規模の相談

### 3. 品質チェック実行
- タイトル規則の確認
- 必須ラベルの確認
- テンプレート項目の確認
- 親子関係の整合性確認

### 4. 内容詳細化
- タイトル・説明文の作成
- 受け入れ条件の明確化
- テンプレート選択（feature/bug/parent等）

### 5. ラベル・メタデータ決定
- 優先度（P0/P1/P2）の決定
- 作業規模（S/M/L）の見積もり
- 実装内容タイプの分類

### 6. 最終バリデーション
- すべての必須項目を再確認
- 推奨項目の確認
- 整合性の最終チェック

### 7. Issue作成実行
- GitHub CLIでIssue作成
- 親子関係がある場合は適切にリンク設定
- 作成結果の確認・レビュー

## 使用方法

```bash
# Issue品質保証エージェントを起動
/create-issue
```

**引数なし**: 対話的にIssue内容を決定し、品質チェックを実行しながら作成

## 実装例

### 例1: 通常のFeature Issue作成

```bash
gh issue create \
  --title "ダッシュボードに最近のアクティビティ一覧を表示" \
  --body "$(cat <<'EOF'
## 機能概要
ダッシュボードページに最近のアクティビティ5件を表示する機能を追加

## 目的・背景
ユーザーが最近の活動を素早く確認できるようにする

## 受け入れ条件
- [ ] 最新5件のアクティビティが表示される
- [ ] 日付順にソートされている
- [ ] クリックで詳細ページに遷移できる

## 技術的要件
- フレームワークのベストプラクティスに従う
- APIからデータ取得
- ローディング状態の表示

## テスト要件
- [ ] ユニットテスト作成
- [ ] E2Eテスト追加
EOF
)" \
  --label "priority:P2,size:S,type:feature"
```

### 例2: 親チケット作成

```bash
gh issue create \
  --title "[親チケット] 検索機能の実装" \
  --body "$(cat <<'EOF'
## プロジェクト概要
検索機能を実装し、ユーザーがコンテンツを効率的に見つけられるようにする

## 目的
大量のデータから特定の内容を素早く検索できるようにする

## 子チケット一覧
- [ ] #XXX - 検索UI実装
- [ ] #XXX - 検索APIエンドポイント作成
- [ ] #XXX - 全文検索インデックス構築

## 実装順序・依存関係
1. 最初に検索APIエンドポイント作成（基盤）
2. 次に全文検索インデックス構築
3. 最後に検索UI実装

## 全体の受け入れ条件
- [ ] すべての子チケットが完了
- [ ] 統合テストが通過
- [ ] パフォーマンステスト通過
EOF
)" \
  --label "priority:P1,size:L,type:feature"
```

### 例3: バグ修正Issue作成

```bash
gh issue create \
  --title "ログイン画面でパスワードが保存されない" \
  --body "$(cat <<'EOF'
## バグ概要
ログイン画面で「パスワードを保存」をチェックしても次回ログイン時にパスワードが保存されていない

## 再現手順
1. ログインページにアクセス
2. メールアドレスとパスワードを入力
3. 「パスワードを保存」にチェック
4. ログイン成功
5. ログアウト
6. 再度ログインページにアクセス
7. パスワード欄が空白

## 期待される動作
パスワードが自動入力される

## 実際の動作
パスワード欄が空白のまま

## 環境情報
- ブラウザ: Chrome 120.0
- OS: Windows 11

## 影響度
- [x] UI表示問題
EOF
)" \
  --label "priority:P1,size:S,type:bugfix"
```

## 関連コマンド

```bash
# 既存Issue確認
gh issue list --state open

# ラベル一覧確認
gh label list

# Issue詳細確認
gh issue view [issue番号]

# Issue作成後の作業開始
/start-work
```

## 重要な注意事項

1. **ラベルはプロジェクトに応じて調整**
   - プロジェクトのラベル体系を確認
   - 存在しないラベルは使用しない

2. **親チケットは必ず `[親チケット]` で開始**
   - `[親チケット]` の前後にスペース不要
   - プロジェクトの言語に合わせる（日本語/英語）

3. **子チケットは親チケット番号を記載**
   - 本文に `親チケット: #XXX` を含める

4. **品質チェックを必ず実行**
   - 作成前に全項目を確認
   - 不備がある場合は修正してから作成

## 期待される成果

- **高品質なIssue**: 標準に準拠したIssue
- **明確な要件定義**: 議論を通じた要件の明確化
- **適切なIssue構造**: 単一 vs 親子チケットの最適判断
- **正確な見積もり**: 作業規模・優先度の適切な設定
- **実装可能性**: 技術的制約を考慮した現実的なタスク設計
