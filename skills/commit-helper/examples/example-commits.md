# コミットメッセージ例集

このファイルには、様々なシナリオでのConventional Commitsの実例を示します。

## 新機能追加（feat）

### 例1: シンプルな機能追加
```
feat: ユーザープロフィール編集機能を追加
```

### 例2: Scope付き機能追加
```
feat(auth): ソーシャルログイン機能を実装
```

### 例3: 詳細な説明付き
```
feat(search): 全文検索機能を追加

Elasticsearchを使用した高速な全文検索を実装。
以下の機能をサポート：

- キーワード検索
- ファジー検索
- フィルタリング
- ハイライト表示

検索インデックスは毎時更新される。
```

## バグ修正（fix）

### 例1: シンプルなバグ修正
```
fix: ログアウト後のリダイレクトエラーを修正
```

### 例2: Issue参照付き
```
fix(ui): モバイルでのフォームレイアウト崩れを修正

Fixes #123
```

### 例3: 詳細な修正内容
```
fix(api): ユーザー検索時のタイムアウトを修正

大量のユーザーデータを扱う際にタイムアウトが発生する問題を解決。
クエリにインデックスを追加し、ページネーション処理を最適化。

修正前: 平均3秒
修正後: 平均200ms

Fixes #456
```

## ドキュメント更新（docs）

### 例1: README更新
```
docs: インストール手順を追加
```

### 例2: API仕様書更新
```
docs(api): エンドポイント一覧を更新

新しく追加された `/api/v2/users` エンドポイントのドキュメントを追加。
```

### 例3: コメント追加
```
docs: 複雑なアルゴリズムにコメントを追加

認証フローとキャッシュ戦略の説明を追加して、
新しいメンバーがコードを理解しやすくした。
```

## リファクタリング（refactor）

### 例1: コード整理
```
refactor: ユーザーサービスを複数ファイルに分割
```

### 例2: アーキテクチャ変更
```
refactor(store): VuexからPiniaに移行

状態管理ライブラリをより軽量で型安全なPiniaに移行。
既存の機能は維持しつつ、コードの可読性が向上。
```

### 例3: パフォーマンス以外の最適化
```
refactor(components): コンポーネント構造を整理

- 共通ロジックをカスタムフックに抽出
- props の型定義を厳密化
- 不要な依存関係を削除

機能的な変更はないが、保守性が向上。
```

## パフォーマンス改善（perf）

### 例1: データベース最適化
```
perf(database): インデックスを追加してクエリ速度を改善
```

### 例2: フロントエンド最適化
```
perf(ui): 画像の遅延読み込みを実装

初期ロード時間を40%削減。
Intersection Observer APIを使用して、
ビューポートに入った画像のみを読み込むように変更。
```

### 例3: キャッシュ追加
```
perf(api): Redisキャッシュを導入

頻繁にアクセスされるユーザーデータをキャッシュ。
平均レスポンス時間が500ms → 50msに改善。
```

## テスト（test）

### 例1: ユニットテスト追加
```
test: ユーザー認証のユニットテストを追加
```

### 例2: E2Eテスト追加
```
test(e2e): チェックアウトフローのE2Eテストを追加

Playwrightを使用して以下のシナリオをテスト：
- カート追加
- クーポン適用
- 決済完了
```

### 例3: テストカバレッジ向上
```
test(api): APIエンドポイントのテストカバレッジを80%に向上

不足していた以下のケースを追加：
- バリデーションエラー
- 権限エラー
- タイムアウト処理
```

## ビルド設定（build）

### 例1: 依存関係更新
```
build: 依存パッケージをアップデート
```

### 例2: ビルド設定変更
```
build(webpack): 本番ビルドの最適化設定を追加

Tree shakingとコード分割を有効化。
バンドルサイズが30%削減。
```

### 例3: 新しいツール導入
```
build: Viteをビルドツールとして導入

webpackからViteに移行して開発サーバーの起動時間を短縮。
ホットリロードも高速化。
```

## CI/CD設定（ci）

### 例1: GitHub Actions追加
```
ci: 自動テストワークフローを追加
```

### 例2: デプロイ自動化
```
ci: Vercelへの自動デプロイを設定

mainブランチへのプッシュで本番環境に自動デプロイ。
プルリクエストではプレビュー環境を自動作成。
```

### 例3: セキュリティスキャン
```
ci: 依存関係の脆弱性スキャンを追加

Dependabotを有効化して、セキュリティアップデートを自動検出。
週次でセキュリティレポートを生成。
```

## その他（chore）

### 例1: 設定ファイル更新
```
chore: .gitignoreを更新
```

### 例2: ライセンス追加
```
chore: MITライセンスを追加
```

### 例3: 環境設定
```
chore: 開発環境のセットアップスクリプトを追加

新しいメンバーが簡単に開発を始められるように、
必要な依存関係とデータベースのセットアップを自動化。
```

## 破壊的変更（BREAKING CHANGE）

### 例1: API変更
```
feat(api): REST APIをGraphQLに移行

BREAKING CHANGE: すべてのRESTエンドポイントが廃止されました。
クライアントアプリケーションはGraphQLエンドポイント `/graphql` を使用してください。

移行ガイド: docs/migration-guide.md を参照
```

### 例2: 設定ファイル形式変更
```
refactor(config): 設定ファイル形式をYAMLに変更

BREAKING CHANGE: config.json は廃止され、config.yaml を使用します。
既存の設定は以下のコマンドで移行できます：
  npm run migrate-config
```

### 例3: 関数シグネチャ変更
```
refactor(auth): 認証関数のインターフェースを変更

BREAKING CHANGE: `authenticate()` 関数のシグネチャが変更されました。

変更前:
  authenticate(username, password)

変更後:
  authenticate({ username, password, rememberMe })

rememberMeはオプショナルで、デフォルトはfalseです。
```

## 複数Issue対応

### 例1: 複数のバグを一度に修正
```
fix(ui): フォーム関連の複数のバグを修正

- 送信ボタンの二重クリック防止
- バリデーションエラーの表示位置修正
- 入力フィールドのフォーカス制御改善

Fixes #101, #102, #103
```

### 例2: 機能追加とバグ修正（推奨されない）
```
# 非推奨: 1つのコミットに複数の異なる種類の変更を含めない
feat(auth): パスワードリセット機能を追加し、ログインバグを修正

# 推奨: 2つの独立したコミットに分割
feat(auth): パスワードリセット機能を追加
fix(auth): ログイン失敗時のエラーメッセージを修正
```

## コミット取り消し（revert）

### 例1: シンプルな取り消し
```
revert: feat(payment): Stripe統合を追加

This reverts commit a1b2c3d4e5f6.
```

### 例2: 理由付き取り消し
```
revert: feat(search): Elasticsearch統合を追加

本番環境でパフォーマンス問題が発生したため、
一旦この機能を取り消し。

調査後に再実装予定。

This reverts commit a1b2c3d4e5f6.
Refs #789
```

## マルチリポジトリ対応

### 例1: モノレポ内のパッケージ指定
```
feat(packages/ui): 新しいボタンコンポーネントを追加
```

### 例2: モノレポ内の複数パッケージに影響
```
refactor: 共通型定義を @types/common に移動

以下のパッケージに影響：
- packages/api
- packages/ui
- packages/mobile
```

## 実際のプロジェクト例

### Vue.jsプロジェクト
```
feat(components): UserProfile コンポーネントを追加
fix(store): ユーザー状態の更新ロジックを修正
refactor(composables): useAuth フックを整理
test(components): LoginForm のテストを追加
```

### Next.jsプロジェクト
```
feat(pages): ブログ詳細ページを追加
fix(api): サーバーサイドレンダリングのエラーを修正
perf(images): next/image を使用して画像最適化
ci: Vercelデプロイワークフローを追加
```

### Node.js API
```
feat(routes): ユーザー管理エンドポイントを追加
fix(middleware): 認証ミドルウェアのトークン検証を修正
perf(database): コネクションプーリングを実装
test(integration): APIの統合テストを追加
```
